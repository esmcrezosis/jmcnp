<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/admin">
<head>
    <title>Espace Bancaire</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<th:block layout:fragment="navbar">
    <div th:include="fgfn/menu :: navbar" th:remove="tag"></div>
</th:block>
<ul class="breadcrumb" layout:fragment="breadcrumb">
    <li><i class="ace-icon fa fa-home home-icon"></i> <a
            th:href="@{/}">Accueil</a></li>
    <li class="active">FGFN</li>
</ul>
<ul class="breadcrumb" layout:fragment="breadcrumb">
    <li><i class="ace-icon fa fa-home home-icon"></i> <a
            th:href="@{/}">Accueil</a></li>
    <li class="active">Espace Bancaire</li>
</ul>
<!-- /.breadcrumb -->
<div layout:fragment="content">
    <div class="card">
        <div class="card-header">
            <div class="float-left">
                <a class="btn btn-default btn-sm" th:href="@{/tabOpiEmis}">Retour</a>
            </div>
            <h5 class="card-title">Détails des OPI</h5>
        </div>
        <div class="card-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="md-form col-lg-4">
                        <input type="text" id="codeMembre" th:value="${tpa.codeMembre}" class="form-control">
                        <label for="codeMembre">Code Membre</label>
                    </div>
                    <div class="md-form col-lg-4">
                        <input th:if="${#strings.endsWith(tpa.codeMembre,'P')}" type="text" id="nomMembre"
                               th:value="${tpa.membre.nomMembre}"
                               class="form-control">
                        <input th:if="${#strings.endsWith(tpa.codeMembre,'M')}" type="text" id="raisonSociale"
                               th:value="${tpa.membreMorale.raisonSociale}"
                               class="form-control">
                        <label for="nomMembre">Nom Membre</label>
                    </div>
                    <div class="md-form col-lg-4">
                        <input type="text" id="prenomMembre"
                               th:value="${(#strings.endsWith(tpa.codeMembre,'P')) ? tpa.membre.prenomMembre : ''}" class="form-control">
                        <label for="prenomMembre">Prénoms Membre</label>
                    </div>
                </div>
                <div class="row">
                    <div class="md-form col-lg-4">
                        <input type="text" id="montantGcp" th:value="${tpa.montGcp}" class="form-control">
                        <label for="montantGcp">Montant</label>
                    </div>
                    <div class="md-form col-lg-4">
                        <input type="text" id="montGcpMaj" th:value="${tpa.montGcpMaj}" class="form-control">
                        <label for="montGcpMaj">Montant Majoré</label>
                    </div>
                    <div class="md-form col-lg-4">
                        <input type="text" id="montTranche" th:value="${tpa.montTranche}" class="form-control">
                        <label for="montTranche">Montant Tranche</label>
                    </div>
                </div>
                <div class="row">
                    <div class="md-form col-lg-4">
                        <input type="text" id="ntf" th:value="${tpa.ntf}" class="form-control">
                        <label for="ntf">Nombre d'OPI</label>
                    </div>
                    <div class="md-form input-group mb-3 col-lg-4">
                        <input type="text" id="periode" th:value="${tpa.periode}" class="form-control">
                        <div class="input-group-append">
                            <span class="input-group-text md-addon" id="material-addon2">Ouvres</span>
                        </div>
                        <label for="montGcpMaj">Période</label>
                    </div>
                    <div class="md-form col-lg-4">
                        <input type="text" id="modeReglement" th:value="${tpa.modeReglement}" class="form-control">
                        <label for="nomMembre">Mode Reglement</label>
                    </div>
                </div>

                <div class="row">
                    <table id="opiTable" class="table table-striped table-condensed">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Numero Ordre</th>
                            <th>Numero</th>
                            <th>Banque</th>
                            <th>Date Début</th>
                            <th>Date Fin</th>
                            <th>Montant</th>
                            <th>Disponible</th>
                            <th>Payer</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="traite : ${traites}"
                            th:class="((${traite.traiteDisponible} == 1)? ((${#dates.format(traite.traiteDateFin,'yyyy-MM-dd')} le ${#dates.format(#dates.createNow(),'yyyy-MM-dd')})? 'success' : 'info') : 'danger')">
                            <td th:text="${traite.traiteId}">1</td>
                            <td th:text="${traite.traiter}">45,33000</td>
                            <td th:text="${traite.traiteNumero}">2</td>
                            <td th:text="${traite.traiteCodeBanque}">1</td>
                            <td th:text="${traite.traiteDateDebut}">3,330</td>
                            <td th:text="${traite.traiteDateFin}">Feb 12</td>
                            <td th:text="${traite.traiteMontant}">45,33000</td>
                            <td th:text="${traite.traiteDisponible}">0</td>
                            <td th:text="${traite.traitePayer}">0</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<th:block layout:fragment="script" th:remove="tag">
    <script type="text/javascript" th:src="@{/resources/mdb/js/addons/datatables.min.js}"></script>
    <script th:inline="javascript">
    </script>
</th:block>
</body>
</html>
